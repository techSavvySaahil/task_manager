(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,a){e.exports=a(406)},146:function(e,t,a){},404:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(137),o=a.n(s),c=(a(146),a(51)),i=a(16),l=a(17),u=a(20),d=a(18),p=a(21),m=a(19),h=a(139),b=a.n(h),f=a(140),g=a.n(f),v={API_key:"keywRQIytay1RjxbX"};a(404);var O=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return(0,this.props.connectDragSource)(r.a.createElement("div",{className:"task"},r.a.createElement("div",{className:"text-left"},"Customer: ",this.props.task.fields.customer_name),r.a.createElement("div",{className:"text-left"},"Contact: ",this.props.task.fields.customer_contact_no),r.a.createElement("br",null),r.a.createElement("div",{className:"text-right"},"Agent: ",this.props.task.fields.agent_name)))}}]),t}(r.a.Component),j=Object(m.DragSource)("task",{beginDrag:function(e,t,a){return{comp:"task",id:e.task.id,status:e.task.fields.status}}},function(e,t){return{connectDragSource:e.dragSource()}})(O);var k=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return(0,this.props.connectDropTarget)(r.a.createElement("div",{className:"board"},r.a.createElement("div",{className:"board-title"},this.props.name),Object.values(this.props.tasks).map(function(e){return r.a.createElement(j,{key:e.id,task:e})})))}}]),t}(r.a.Component),w=Object(m.DropTarget)(["task"],{drop:function(e,t,a){var n=t.getItem();e.updateRecord(n.id,n.status,e.name)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0}),canDrop:t.canDrop(),itemType:t.getItemType()}})(k),y=new g.a({apiKey:v.API_key}).base("appS0hWdEtDwy1hCW"),E=["Created","Won","Lost"],C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={Created:{},Won:{},Lost:{},loading:!1},a.populateRecords=function(){a.setState({loading:!0}),y("Imported table").select({view:"Grid view"}).firstPage(function(e,t){if(e)return alert("Couldn't populate records. Please reload the page."),void a.setState({loading:!1});var n="",r={Created:{},Won:{},Lost:{}};t&&(t.forEach(function(e){n=e.fields.status,r[n][e.id]=e}),a.setState({Created:Object.assign({},r.Created)}),a.setState({Won:Object.assign({},r.Won)}),a.setState({Lost:Object.assign({},r.Lost)}),a.setState({loading:!1}))})},a.updateRecord=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"status";y("Imported table").update(e,Object(c.a)({},r,n)).then(function(e){}).catch(function(e){alert("Couldn't change the status. Please try again.")});var s=Object.assign({},a.state[t]),o=Object.assign({},a.state[n]),i=s[e];i.fields.status=n,o[e]=i,a.setState(Object(c.a)({},n,o)),delete s[e],a.setState(Object(c.a)({},t,s))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.populateRecords()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("span",{className:"title"},"Agent Dashboard")),r.a.createElement("div",{className:"wrapper"},this.state.loading&&r.a.createElement("div",{className:"loader-wrapper"},r.a.createElement("p",null,"Loading...")),E.map(function(t){return r.a.createElement(w,{key:t,name:t,tasks:e.state[t],updateRecord:e.updateRecord})})))}}]),t}(n.Component),D=Object(m.DragDropContext)(b.a)(C);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[141,2,1]]]);
//# sourceMappingURL=main.0142fad4.chunk.js.map